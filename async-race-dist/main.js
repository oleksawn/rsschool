(()=>{"use strict";var e={11:(e,t,a)=>{e.exports=a.p+"assets/car.svg"}},t={};function a(r){var s=t[r];if(void 0!==s)return s.exports;var n=t[r]={exports:{}};return e[r](n,n.exports,a),n.exports}a.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),(()=>{var e;a.g.importScripts&&(e=a.g.location+"");var t=a.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var r=t.getElementsByTagName("script");r.length&&(e=r[r.length-1].src)}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),a.p=e})(),(()=>{a(11);class e{constructor(e,t,a="div",r=""){const s=document.createElement(a);s.classList=t,s.innerHTML=r,this.el=s,this.parent=e}}class t{constructor(t){this.pageCar=new e(t,["page__car"]),this.carControls=new e(this.pageCar.el,["car__controls"]),this.controlsCarName=new e(this.carControls.el,["controls__car-name"],"p"),this.carTrack=new e(this.pageCar.el,["car__track"]),this.trackCarImg=new e(this.carTrack.el,["track__car-img"],"object"),this.trackCarImg.el.setAttribute("type","image/svg+xml"),this.trackCarImg.el.setAttribute("data","assets/car.svg")}}class r{constructor(){this.pageNum=1,this.carsAmount=0,this.carsArr=[],this.nodes={},this.nodes.container=new e(document.body,["container"]),this.nodes.header=new e(this.nodes.container.el,["header"]),this.nodes.garage=new e(this.nodes.container.el,["garage"]),this.nodes.garageCarsAmount=new e(this.nodes.garage.el,["garage__cars-amount"],"h2",`Garage: ${this.carsAmount} cars`),this.nodes.garagePageControls=new e(this.nodes.garage.el,["garage__page-controls"]),this.nodes.pageControlsPrevBtn=new e(this.nodes.garagePageControls.el,["page-controls__btn page-controls__btn_prev"],"button","prev"),this.nodes.pageControlsPageNum=new e(this.nodes.garagePageControls.el,["page-controls__page-number"],"h3",`Page #${this.pageNum}`),this.nodes.pageControlsNextBtn=new e(this.nodes.garagePageControls.el,["page-controls__btn page-controls__btn_next"],"button","next"),this.nodes.garageCarsControls=new e(this.nodes.garage.el,["garage__cars-controls-container"]),this.nodes.garagePage=new e(this.nodes.garage.el,["garage__page"]),this.nodes.cars=[];for(let e=0;e<7;e++)this.nodes.cars.push(new t(this.nodes.garagePage.el))}getPrevBtn(){return this.nodes.pageControlsPrevBtn.el}getNextBtn(){return this.nodes.pageControlsNextBtn.el}getPageNum(){return this.pageNum}getCarsAmount(){return this.carsAmount}renderPage(){Object.values(this.nodes).forEach((e=>{void 0===e.parent?e.forEach((e=>{Object.values(e).forEach((e=>{e.parent.appendChild(e.el)}))})):e.parent.appendChild(e.el)}))}updateData(e){console.log("updateData: insert fetched data on the garage page"),this.carsArr=e,this.nodes.garageCarsAmount.el.innerText=`Garage: ${this.carsAmount} cars`,this.nodes.pageControlsPageNum.el.innerText=`Page #${this.pageNum}`,this.nodes.cars.forEach(((t,a)=>{console.log(e,e[a].id),t.trackCarImg.id=e[a].id,t.controlsCarName.el.innerText=e[a].name,t.trackCarImg.el.color=e[a].color,t.trackCarImg.el.onload=function(){this.contentDocument.getElementsByClassName("svg")[0].setAttribute("fill",this.color)}}))}}({garageRoute(){const e=new r;function t(t,a){fetch(`http://127.0.0.1:3000/garage?_page=${t}&_limit=7`).then((a=>{console.log(a);const r=Number(a.headers.get("X-Total-Count"));return e.pageNum=t,e.carsAmount=r,a.json()})).then((t=>{console.log("after fetch",t),e.updateData(t),a&&e.renderPage()}))}e.getPrevBtn().onclick=()=>{let a=e.getPageNum();a>1&&(a-=1,t(a,!0))},e.getNextBtn().onclick=()=>{let a=e.getPageNum();e.getCarsAmount()-7*a>0&&(a+=1,t(a,!0))},t(1,!0)}}).garageRoute()})()})();